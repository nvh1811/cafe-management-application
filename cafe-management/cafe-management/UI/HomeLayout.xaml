<UserControl x:Class="cafe_management.UI.HomeLayout"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:helper="clr-namespace:cafe_management.Helper"
             xmlns:local="clr-namespace:cafe_management"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="800"
             Background="#cec1a8">

    <UserControl.Resources>
        <helper:BoolToVisibilityConverter x:Key="BoolToVisibility"/>
        <!-- Account Template -->
        <DataTemplate x:Key="AccountTemplate">
            <Grid Background="#35371e" RenderTransformOrigin="0.486,0.862">
                <TextBlock Text="ACCOUNT MANAGEMENT" 
                           FontSize="24" FontWeight="Bold"
                           HorizontalAlignment="Center" 
                           VerticalAlignment="Top" 
                           Margin="20"
                           Foreground="#ffead8"/>
                <StackPanel HorizontalAlignment="Center" 
                            VerticalAlignment="Center" 
                            Width="300">
                    <TextBlock Text="UserName"
                               Foreground="#ffead8"
                               FontSize="12"
                               FontWeight="Medium"
                               FontFamily="Montserrat"
                               Margin="0,15,0,0"/>
                    <TextBox x:Name="txtUser"
                         FontSize="15"
                         FontWeight="Medium"
                         FontFamily="Montserrat"                         
                         Foreground="#ffead8"
                         CaretBrush="LightGray"
                         BorderBrush="DarkGray"
                         BorderThickness="0,0,0,1"
                         Height="28"
                         VerticalAlignment="Center"                        
                         Margin="0,5,0,0"
                         Padding="25,5,0,0"
                         Background="Transparent"/>
                    <TextBlock Text="Password"
                           Foreground="#ffead8"
                           FontSize="12"
                           FontWeight="Medium"
                           FontFamily="Montserrat"
                           Margin="0,15,0,0"/>
                    <PasswordBox x:Name="txtPassword"
                         FontSize="15"
                         FontWeight="Medium"
                         FontFamily="Montserrat"                         
                         Foreground="#ffead8"
                         CaretBrush="LightGray"
                         BorderBrush="DarkGray"
                         BorderThickness="0,0,0,1"
                         Height="28"
                         VerticalAlignment="Center"                        
                         Margin="0,5,0,0"
                         Padding="25,5,0,0"
                         Background="Transparent"/>
                    <StackPanel Orientation="Horizontal">
                        <Grid Margin="0,20,0,0" Width="300">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Button Content="Đổi mật khẩu" 
                                    Width="120" Height="35" 
                                    Margin="0,30,0,0" FontWeight="Bold"
                                    Click="ButtonChangePass_Click"
                                    Grid.Column="1"/>
                            <Button Content="Đăng xuất" 
                                    Width="120" Height="35" 
                                    Margin="0,30,0,0" FontWeight="Bold"
                                    Click="ButtonExitAcc_Click"/>
                        </Grid>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </DataTemplate>

        <!-- Table Template-->
        <DataTemplate x:Key="TableTemplate">
            <Grid Background="#4d502c">
                <TextBlock Text="TABLE MANAGEMENT" 
                           FontSize="24" FontWeight="Bold" Foreground="#ffeda8"
                           HorizontalAlignment="Center" 
                           VerticalAlignment="Top" 
                           Margin="20"/>

                <!-- Panel chính chứa danh sách bàn và thông tin chi tiết -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="350"/>
                    </Grid.ColumnDefinitions>
                    <!-- Danh sách bàn bên trái -->
                    <Border Grid.Column="0"
                            Background="#5a5d34"  
                            Margin="10,70,5,100" 
                            CornerRadius="10" 
                            BorderBrush="#ffeda8" 
                            BorderThickness="2">

                        <WrapPanel x:Name="btnGrid" 
                                   HorizontalAlignment="Center"  
                                   Orientation="Horizontal" 
                                   >
                        </WrapPanel>

                    </Border>
                    <!-- Panel thông tin chi tiết bên phải -->
                    <Border Grid.Column="1" 
                    Background="#5a5d34" 
                    Margin="5,70,5,100" 
                    CornerRadius="10" 
                    BorderBrush="#ffeda8" 
                    BorderThickness="2"
                    Padding="15">
                        <StackPanel>
                            <!-- Hiển thị khi chưa chọn bàn -->
                            <TextBlock x:Name="txtNoTableSelected" 
                               Text="Chọn một bàn để xem chi tiết" 
                               Foreground="#ffeda8" 
                               FontSize="14"
                               HorizontalAlignment="Center"
                               Margin="0,50,0,0"
                               Visibility="Visible"/>

                            <!-- Thông tin bàn chi tiết -->
                            <StackPanel x:Name="TableDetailPanel" Visibility="Collapsed">
                                <!-- Thông tin Bill -->
                                <Border Background="#6a6d3c" 
                                        CornerRadius="8" 
                                        Padding="15" 
                                        Margin="0,15,0,0">
                                    <StackPanel>
                                        <TextBlock x:Name="txtTableName" 
                                                   Foreground="#ffeda8" 
                                                   FontSize="16" 
                                                   FontWeight="Bold"
                                                   TextAlignment="Center"/>
                                        <Rectangle Height="1" Fill="#ffeda8" Margin="0,8,0,12" Opacity="0.3" VerticalAlignment="Center"/>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Mã HD: " 
                                                       Foreground="#ffeda8" 
                                                       FontSize="12"
                                                       FontWeight="SemiBold"/>
                                            <TextBlock x:Name="txtBillId" 
                                                       Foreground="#ffeda8" 
                                                       FontSize="12"/>
                                        </StackPanel>

                                        <StackPanel Orientation="Horizontal" Margin="0,3,0,0">
                                            <TextBlock Text="Thời gian vào: " 
                                                       Foreground="#ffeda8" 
                                                       FontSize="12"
                                                       FontWeight="SemiBold"/>
                                            <TextBlock x:Name="txtBillTime" 
                                                       Foreground="#ffeda8" 
                                                       FontSize="12"/>
                                        </StackPanel>
                                        <DataGrid x:Name="dgOrderItems" 
                                                  Margin="0,10,0,0"
                                                  AutoGenerateColumns="False"
                                                  Height="300" 
                                                  Background="#8a8c5d"
                                                  BorderBrush="#ffead8"
                                                  Foreground="#3e000c"
                                                  HeadersVisibility="Column"
                                                  CanUserAddRows="False">
                                            <DataGrid.Columns>
                                                <DataGridTextColumn Header="Tên món" 
                                                                    Binding="{Binding ItemName}" 
                                                                    Width="60"
                                                                    Foreground="Black"/>
                                                <DataGridTextColumn Header="Số lượng" 
                                                                    Binding="{Binding Quantity}" 
                                                                    Width="40"
                                                                    Foreground="Black"/>
                                                <DataGridTextColumn Header="Đơn giá" 
                                                                    Binding="{Binding Price, StringFormat={}{0:N0}đ}" 
                                                                    Width="40"
                                                                    Foreground="Black"/>
                                                <DataGridTextColumn Header="Thành tiền" 
                                                                    Binding="{Binding TotalPrice, StringFormat={}{0:N0}đ}" 
                                                                    Width="90"
                                                                    Foreground="Black"/>
                                            </DataGrid.Columns>
                                        </DataGrid>
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                                            <TextBlock Text="Tổng tiền: " 
                                                       Foreground="#ffead8" 
                                                       FontSize="14"
                                                       FontWeight="SemiBold"/>
                                            <TextBlock x:Name="txtTotalAmount" 
                                                       Text="0đ" 
                                                       Foreground="#ffeda8" 
                                                       FontSize="14"
                                                       FontWeight="Bold"/>
                                        </StackPanel>
                                        <Button Content="Thanh toán" 
                                                Width="100" Height="35" 
                                                Margin="0,15,0,0" FontWeight="Bold"
                                                HorizontalAlignment="Center"
                                                Background="#4f772d"
                                                Foreground="White"
                                                Click="ButtonCheckout_Click"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </StackPanel>
                        
                    </Border>
                </Grid>

                <!-- Legend trạng thái bàn -->
                <StackPanel Orientation="Horizontal" 
                            HorizontalAlignment="Left" 
                            VerticalAlignment="Bottom" 
                            Margin="0,0,0,70">
                    <Border Width="20" Height="20" Background="#4f772d" Margin="5,0" CornerRadius="3"/>
                    <TextBlock Text="Trống" Foreground="#ffeda8" VerticalAlignment="Center" Margin="0,0,15,0"/>

                    <Border Width="20" Height="20" Background="PaleVioletRed"  Margin="5,0" CornerRadius="3"/>
                    <TextBlock Text="Có khách" Foreground="#ffeda8" VerticalAlignment="Center" Margin="0,0,15,0"/>
                </StackPanel>

                <StackPanel Visibility="{Binding Source={x:Static helper:PermissionHelper.isAdmin},
                                        Converter={StaticResource BoolToVisibility}}" 
                            Orientation="Horizontal" 
                            HorizontalAlignment="Center" 
                            VerticalAlignment="Bottom" 
                            Margin="20">
                    <Button Content="Thêm bàn" 
                            Width="100" Height="35" 
                            Margin="5"
                            Click="ButtonAddTable_Click"
                            Background="#4f772d"
                            Foreground="White"/>
                    <Button Content="Xóa bàn" 
                            Width="100" Height="35" 
                            Margin="5"
                            Click="ButtonDeleteTable_Click"
                            Background="#bc4749"
                            Foreground="White"/>
                    <Button Content="Sửa bàn" 
                            Width="100" Height="35" 
                            Margin="5"
                            Click="ButtonEditTable_Click"
                            Background="#90a955"
                            Foreground="White"/>
                </StackPanel>
            </Grid>
        </DataTemplate>

        <!-- Menu Template với chức năng CRUD -->
        <DataTemplate x:Key="MenuTemplate">
            <Grid Background="#707143">
                <TextBlock Text="MENU MANAGEMENT" 
                   FontSize="24" FontWeight="Bold"
                   HorizontalAlignment="Center" 
                   VerticalAlignment="Top" 
                   Margin="20"
                   Foreground="#ffead8"/>

                <Grid Margin="20,70,20,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="250"/>
                    </Grid.ColumnDefinitions>

                    <!-- Danh sách menu bên trái -->
                    <StackPanel Grid.Column="0" Margin="0,0,20,0">
                        <TextBlock Text="DANH SÁCH MÓN ĂN" 
                           Foreground="#ffead8" 
                           FontSize="16" 
                           FontWeight="Bold"
                           Margin="0,0,0,10"/>

                        <!-- Thanh tìm kiếm -->
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <TextBox x:Name="txtSearchMenu" 
                             Width="200" Height="30" 
                             Padding="5"
                             TextChanged="TxtSearchMenu_TextChanged"
                             Background="#8a8c5d"
                             Foreground="#ffead8"
                             BorderBrush="#ffead8"/>
                        </StackPanel>

                        <!-- DataGrid danh sách món ăn -->
                        <DataGrid x:Name="dgMenuItems" 
                         AutoGenerateColumns="False"
                         Height="300" 
                         Background="#8a8c5d"
                         BorderBrush="#ffead8"
                         Foreground="#3e000c"
                         HeadersVisibility="Column"
                         CanUserAddRows="False">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Tên món" 
                                          Binding="{Binding Name}" 
                                          Foreground="Black"/>
                                <DataGridTextColumn Header="Giá" 
                                          Binding="{Binding Price, StringFormat={}{0:N0}đ}" 
                                          Foreground="Black"/>
                                <DataGridTextColumn Header="Danh mục" 
                                          Binding="{Binding Category}" 
                                          Foreground="Black"/>
                                <DataGridTemplateColumn Header="Thao tác"
                                                        Visibility="{Binding Source={x:Static helper:PermissionHelper.isAdmin},
                                                        Converter={StaticResource BoolToVisibility}}">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <Button Content="Sửa" 
                                                Width="50" Height="25" 
                                                Margin="2"
                                                Background="#90a955"
                                                Foreground="White"
                                                FontSize="10"
                                                Click="BtnEditMenuItem_Click"
                                                Tag="{Binding Id}"/>
                                                <Button Content="Xóa" 
                                                Width="50" Height="25" 
                                                Margin="2"
                                                Background="#bc4749"
                                                Foreground="White"
                                                FontSize="10"
                                                Click="BtnDeleteMenuItem_Click"
                                                Tag="{Binding Id}"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>

                    <!-- Form thêm/sửa món ăn bên phải -->
                    <Border Grid.Column="1" 
                    Background="#8a8c5d" 
                    CornerRadius="10" 
                    Padding="15">
                        <StackPanel Visibility="{Binding Source={x:Static helper:PermissionHelper.isAdmin},
                                                 Converter={StaticResource BoolToVisibility}}">
                            <TextBlock Text="THÊM/CHỈNH SỬA MÓN ĂN" 
                               Foreground="#ffead8" 
                               FontSize="16" 
                               FontWeight="Bold"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,15"/>

                            <StackPanel>
                                <TextBlock Text="Tên món:" 
                                   Foreground="#ffead8" 
                                   FontSize="12"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,5"/>
                                <TextBox x:Name="txtMenuItemName" 
                                 Height="30" 
                                 Background="#b0b17a"
                                 Foreground="#ffead8"
                                 BorderBrush="#ffead8"
                                 Padding="5"/>
                            </StackPanel>

                            <StackPanel Margin="0,10,0,0">
                                <TextBlock Text="Giá:" 
                                   Foreground="#ffead8" 
                                   FontSize="12"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,5"/>
                                <TextBox x:Name="txtMenuItemPrice" 
                                 Height="30" 
                                 Background="#b0b17a"
                                 Foreground="#ffead8"
                                 BorderBrush="#ffead8"
                                 Padding="5"/>
                            </StackPanel>

                            <StackPanel Margin="0,10,0,0">
                                <TextBlock Text="Danh mục:" 
                                   Foreground="#ffead8" 
                                   FontSize="12"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,5"/>
                                <ComboBox x:Name="cmbMenuCategory" 
                                  Height="30" 
                                  Background="#b0b17a"
                                  Foreground="Black"
                                  BorderBrush="#ffead8">
                                </ComboBox>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" 
                                HorizontalAlignment="Center" 
                                Margin="0,20,0,0">
                                <Button x:Name="btnAddMenuItem" 
                                Content="Thêm món" 
                                Width="100" Height="35" 
                                Margin="0,0,10,0"
                                Background="#4f772d"
                                Foreground="White"
                                FontWeight="Bold"
                                Click="BtnAddMenuItem_Click"/>
                                <Button x:Name="btnUpdateMenuItem" 
                                Content="Cập nhật" 
                                Width="100" Height="35" 
                                Background="#90a955"
                                Foreground="White"
                                FontWeight="Bold"
                                Click="BtnUpdateMenuItem_Click"
                                Visibility="Collapsed"/>
                                <Button x:Name="btnCancelEdit" 
                                Content="Hủy" 
                                Width="60" Height="35" 
                                Margin="10,0,0,0"
                                Background="#bc4749"
                                Foreground="White"
                                FontWeight="Bold"
                                Click="BtnCancelEdit_Click"
                                Visibility="Collapsed"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </Grid>
            </Grid>
        </DataTemplate>

        <!-- Order Template -->
        <DataTemplate x:Key="OrderTemplate">
            <Grid Background="#98995a">
                <TextBlock Text="ORDER" 
                   FontSize="24" FontWeight="Bold"
                   HorizontalAlignment="Center" 
                   VerticalAlignment="Top" 
                   Margin="20"
                   Foreground="#ffead8"/>

                <Grid Margin="20,70,20,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="400"/>
                    </Grid.ColumnDefinitions>

                    <!-- Danh sách món ăn bên trái -->
                    <StackPanel Grid.Column="0" Margin="0,0,20,0">
                        <TextBlock Text="MENU ĐỒ ĂN/THỨC UỐNG" 
                           Foreground="#ffead8" 
                           FontSize="16" 
                           FontWeight="Bold"
                           Margin="0,0,0,10"/>

                        <!-- Thanh tìm kiếm -->
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <TextBox x:Name="txtSearchFood" 
                             Width="170" Height="30" 
                             Padding="5"                             
                             Background="#b0b17a"
                             Foreground="#ffead8"
                             BorderBrush="#ffead8"/>
                            <Button Content="Tìm" 
                            Width="40" Height="30" 
                            Margin="10,0,0,0"
                            Background="#4f772d"
                            Foreground="White"
                            Click="BtnSearchFood_Click"/>
                        </StackPanel>
                        <Border
                                Background="#8a8c5d" 
                                CornerRadius="10" 
                                BorderBrush="#ffeda8" 
                                BorderThickness="2" Height="360">

                            <WrapPanel x:Name="foodGrid" 
                                       HorizontalAlignment="Center"  
                                       Orientation="Horizontal"/>

                        </Border>

                        <!-- ListBox danh sách món ăn -->
                    </StackPanel>

                    <!-- Order hiện tại bên phải -->
                    <Border Grid.Column="1" 
                    Background="#8a8c5d" 
                    CornerRadius="10" 
                    Padding="15">
                        <StackPanel>
                            <TextBlock Text="ORDER HIỆN TẠI" 
                               Foreground="#ffead8" 
                               FontSize="16" 
                               FontWeight="Bold"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,15"/>

                            <!-- Chọn bàn -->
                            <StackPanel Margin="0,0,0,10">
                                <TextBlock Text="Chọn bàn:" 
                                   Foreground="#ffead8" 
                                   FontSize="12"
                                   FontWeight="SemiBold"/>
                                <ComboBox x:Name="cmbTables" 
                                  Height="30" 
                                  Background="#b0b17a"
                                  Foreground="Black"
                                  BorderBrush="#ffead8"
                                  DisplayMemberPath="TableName"
                                  SelectedValuePath="Id"
                                  SelectionChanged="CmbTables_SelectionChanged"/>
                            </StackPanel>

                            <!-- Danh sách món đã order -->
                            <TextBlock Text="Danh sách món đã order:" 
                               Foreground="#ffead8" 
                               FontSize="12"
                               FontWeight="SemiBold"
                               Margin="0,10,0,5"/>

                            <ListView x:Name="lstCurrentOrder" 
                              Height="150" 
                              Background="#b0b17a"
                              BorderBrush="#ffead8">
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="#98995a" 
                                        CornerRadius="3" 
                                        Margin="1" 
                                        Padding="5">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="80"/>
                                                    <ColumnDefinition Width="30"/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel Grid.Column="0">
                                                    <TextBlock Text="{Binding ItemName}" 
                                                       Foreground="#ffead8" 
                                                       FontSize="11"
                                                       FontWeight="SemiBold"/>
                                                    <TextBlock Text="{Binding Price, StringFormat={}{0:N0}đ}" 
                                                       Foreground="#ffeda8" 
                                                       FontSize="10"/>
                                                </StackPanel>

                                                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                                                    <Button Content="-" 
                                                    Width="20" Height="20" 
                                                    FontSize="8"
                                                    Background="#bc4749"
                                                    Foreground="White"
                                                    Click="BtnDecreaseQuantity_Click"
                                                    Tag="{Binding ItemId}"/>
                                                    <TextBlock Text="{Binding Quantity}" 
                                                       Foreground="#ffead8" 
                                                       FontSize="11"
                                                       HorizontalAlignment="Center"
                                                       VerticalAlignment="Center"
                                                       Margin="5,0"
                                                       Width="20"
                                                       TextAlignment="Center"/>
                                                    <Button Content="+" 
                                                    Width="20" Height="20" 
                                                    FontSize="8"
                                                    Background="#4f772d"
                                                    Foreground="White"
                                                    Click="BtnIncreaseQuantity_Click"
                                                    Tag="{Binding ItemId}"/>
                                                </StackPanel>

                                                <Button Grid.Column="2" 
                                                Content="×" 
                                                Width="20" Height="20" 
                                                FontSize="10"
                                                Background="#bc4749"
                                                Foreground="White"
                                                Click="BtnRemoveItem_Click"
                                                Tag="{Binding ItemId}"/>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>

                            <!-- Tổng tiền và nút xác nhận -->
                            <StackPanel Margin="0,15,0,0">
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <TextBlock Text="Tổng tiền: " 
                                       Foreground="#ffead8" 
                                       FontSize="14"
                                       FontWeight="SemiBold"/>
                                    <TextBlock x:Name="txtOrderTotal" 
                                       Text="0đ" 
                                       Foreground="#ffeda8" 
                                       FontSize="14"
                                       FontWeight="Bold"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0">
                                    <Button Content="Xóa order" 
                                    Width="100" Height="30" 
                                    Margin="0,0,10,0"
                                    Background="#bc4749"
                                    Foreground="White"
                                    FontWeight="Bold"
                                    Click="BtnClearOrder_Click"/>
                                    <Button Content="Xác nhận order" 
                                    Width="120" Height="30" 
                                    Background="#4f772d"
                                    Foreground="White"
                                    FontWeight="Bold"
                                    Click="BtnConfirmOrder_Click"/>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </Grid>
            </Grid>
        </DataTemplate>
        <!-- Revenue Template -->
        <DataTemplate x:Key="RevenueTemplate">
            <Grid Background="#7d8b6f">
                <TextBlock Text="REVENUE REPORT" 
                           FontSize="24" FontWeight="Bold"
                           HorizontalAlignment="Center" 
                           VerticalAlignment="Top" 
                           Margin="20"
                           Foreground="#ffead8"/>

                <Grid Margin="20,70,20,20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Filter controls -->
                    <Border Grid.Row="0" 
                            Background="#8f9d7f" 
                            CornerRadius="10" 
                            Padding="15" 
                            Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="LỌC THEO THỜI GIAN" 
                                       Foreground="#ffead8" 
                                       FontSize="16" 
                                       FontWeight="Bold"
                                       Margin="0,0,0,10"/>

                            <StackPanel Orientation="Horizontal">
                                <StackPanel Width="200">
                                    <TextBlock Text="Từ ngày" 
                                               Foreground="#ffead8" 
                                               FontSize="12"
                                               Margin="0,0,0,5"/>
                                    <DatePicker x:Name="dpSelectedDateStart" 
                                                Height="30" 
                                                Background="#a8b696"
                                                Foreground="Black"
                                                BorderBrush="#ffead8"
                                                SelectedDate="{x:Static sys:DateTime.Now}"/>
                                </StackPanel>

                                <StackPanel Width="200" Margin="20,0,0,0">
                                    <TextBlock Text="Đến ngày:" 
                                               Foreground="#ffead8" 
                                               FontSize="12"
                                               Margin="0,0,0,5"/>
                                    <DatePicker x:Name="dpSelectedDateEnd" 
                                                Height="30" 
                                                Background="#a8b696"
                                                Foreground="Black"
                                                BorderBrush="#ffead8"
                                                SelectedDate="{x:Static sys:DateTime.Now}"/>
                                </StackPanel>

                                <Button Content="Xem báo cáo" 
                                        Width="120" Height="35" 
                                        Margin="20,15,0,0"
                                        Background="#4f772d"
                                        Foreground="White"
                                        FontWeight="Bold"
                                        Click="BtnViewReport_Click"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Revenue data -->
                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="300"/>
                        </Grid.ColumnDefinitions>

                        <!-- DataGrid for revenue details -->
                        <StackPanel Grid.Column="0" Margin="0,0,20,0">
                            <TextBlock Text="CHI TIẾT DOANH THU" 
                                       Foreground="#ffead8" 
                                       FontSize="16" 
                                       FontWeight="Bold"
                                       Margin="0,0,0,10"/>

                            <DataGrid x:Name="dgRevenueDetails" 
                                    AutoGenerateColumns="False"
                                    Background="#8f9d7f"
                                    BorderBrush="#ffead8"
                                    Foreground="Black"
                                    HeadersVisibility="Column"
                                    CanUserAddRows="False">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Mã HD" 
                                      Binding="{Binding BillId}" 
                                      Foreground="Black"/>
                                    <DataGridTextColumn Header="Bàn" 
                                      Binding="{Binding TableName}" 
                                      Foreground="Black"/>
                                    <DataGridTextColumn Header="Thời gian" 
                                      Binding="{Binding StartTime, StringFormat={}{0:HH:mm dd/MM}}" 
                                      Foreground="Black"/>
                                    <DataGridTextColumn Header="Tổng tiền" 
                                      Binding="{Binding TotalAmount, StringFormat={}{0:N0}đ}" 
                                      Foreground="Black"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </StackPanel>

                        <!-- Summary panel -->
                        <Border Grid.Column="1" 
                                Background="#8f9d7f" 
                                CornerRadius="10" 
                                Padding="15">
                            <StackPanel>
                                <TextBlock Text="TỔNG HỢP" 
                                           Foreground="#ffead8" 
                                           FontSize="16" 
                                           FontWeight="Bold"
                                           HorizontalAlignment="Center"
                                           Margin="0,0,0,15"/>

                                <!-- Summary statistics -->
                                <Border Background="#7d8b6f" CornerRadius="8" Padding="15">
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                            <TextBlock Text="Tổng doanh thu: " 
                                                       Foreground="#ffead8" 
                                                       FontSize="14"
                                                       FontWeight="SemiBold"/>
                                            <TextBlock x:Name="txtTotalRevenue" 
                                                       Text="0đ" 
                                                       Foreground="#ffeda8" 
                                                       FontSize="14"
                                                       FontWeight="Bold"/>
                                        </StackPanel>

                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                            <TextBlock Text="Tổng số hóa đơn: " 
                                                       Foreground="#ffead8" 
                                                       FontSize="12"/>
                                            <TextBlock x:Name="txtTotalBills" 
                                                       Text="0" 
                                                       Foreground="#ffeda8" 
                                                       FontSize="12"
                                                       FontWeight="SemiBold"/>
                                        </StackPanel>

                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                            <TextBlock Text="Doanh thu trung bình: " 
                                                       Foreground="#ffead8" 
                                                       FontSize="12"/>
                                            <TextBlock x:Name="txtAverageRevenue" 
                                                       Text="0đ" 
                                                       Foreground="#ffeda8" 
                                                       FontSize="12"
                                                       FontWeight="SemiBold"/>
                                        </StackPanel>

                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                            <TextBlock Text="Bàn có doanh thu cao nhất: " 
                                                       Foreground="#ffead8" 
                                                       FontSize="12"/>
                                            <TextBlock x:Name="txtTopTable" 
                                                       Text="-" 
                                                       Foreground="#ffeda8" 
                                                       FontSize="12"
                                                       FontWeight="SemiBold"/>
                                        </StackPanel>

                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                            <TextBlock Text="Món bán chạy nhất: " 
                                                       Foreground="#ffead8" 
                                                       FontSize="12"/>
                                            <TextBlock x:Name="txtTopItem" 
                                                       Text="-" 
                                                       Foreground="#ffeda8" 
                                                       FontSize="12"
                                                       FontWeight="SemiBold"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>

                                <!-- Chart/Graph placeholder -->
                                <Border Background="#7d8b6f" 
                                        CornerRadius="8" 
                                        Padding="15" 
                                        Margin="0,15,0,0"
                                        Height="150">
                                    <StackPanel>
                                        <TextBlock Text="BIỂU ĐỒ DOANH THU" 
                                                   Foreground="#ffead8" 
                                                   FontSize="14" 
                                                   FontWeight="Bold"
                                                   HorizontalAlignment="Center"/>

                                        <TextBlock Text="(Biểu đồ cột thể hiện doanh thu theo thời gian)" 
                                                   Foreground="#ffead8" 
                                                   FontSize="10"
                                                   HorizontalAlignment="Center"
                                                   Margin="0,20,0,0"/>

                                        <!-- Simple bar chart visualization -->
                                        <StackPanel Orientation="Horizontal" 
                                                    HorizontalAlignment="Center" 
                                                    VerticalAlignment="Center"
                                                    Margin="0,10,0,0">
                                            <Rectangle Width="20" Height="80" Fill="#4f772d" Margin="2"/>
                                            <Rectangle Width="20" Height="120" Fill="#90a955" Margin="2"/>
                                            <Rectangle Width="20" Height="100" Fill="#4f772d" Margin="2"/>
                                            <Rectangle Width="20" Height="150" Fill="#90a955" Margin="2"/>
                                            <Rectangle Width="20" Height="90" Fill="#4f772d" Margin="2"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>

                                <Button Content="Xuất báo cáo (Excel)" 
                                        Width="150" Height="35" 
                                        Margin="0,15,0,0"
                                        Background="#4f772d"
                                        Foreground="White"
                                        FontWeight="Bold"
                                        HorizontalAlignment="Center"
                                        Click="BtnExportReport_Click"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                </Grid>
            </Grid>
        </DataTemplate>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#3e080c" Padding="15">
            <TextBlock Text="CAFE MANAGEMENT SYSTEM" 
                       Foreground="White" 
                       FontSize="20" 
                       FontWeight="Bold" 
                       HorizontalAlignment="Center"/>
        </Border>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Background="Transparent" Margin="10">
                <Button x:Name="AccountButton" Content="👤 Account" 
                        Height="40" Margin="5" FontSize="14" FontWeight="Bold"
                        Background="#35371e"
                        Foreground="#ffead8"                        
                        Click="AccountButton_Click"/>
                <Button x:Name="TableButton" Content="📊 Table" 
                        Height="40" Margin="5" FontSize="14" FontWeight="Bold"
                        Background="#4d502c"
                        Foreground="#ffead8"
                        Click="TableNavButton_Click"/>
                <Button x:Name="MenuButton" Content="📋 Menu" 
                        Height="40" Margin="5" FontSize="14" FontWeight="Bold"
                        Background="#707143"
                        Foreground="#ffead8"
                        Click="MenuButton_Click"/>
                <Button x:Name="OrderButton" Content="🧾 Order" 
                        Height="40" Margin="5" FontSize="14" FontWeight="Bold"
                        Background="#98995a"
                        Foreground="#ffead8"
                        Click="OrderButton_Click"/>
                <Button x:Name="RevenueButton" Content="💰 Revenue" 
                        Height="40" Margin="5" FontSize="14" FontWeight="Bold"
                        Background="#7d8b6f"
                        Foreground="#ffead8"
                        Click="RevenueButton_Click"/>
            </StackPanel>

            <Border Grid.Column="1" Background="White" Margin="10">
                <!-- ContentControl để hiển thị nội dung -->
                <ContentControl x:Name="MainContent" 
                                ContentTemplate="{StaticResource RevenueTemplate}"/>
            </Border>
        </Grid>
    </Grid>
</UserControl>